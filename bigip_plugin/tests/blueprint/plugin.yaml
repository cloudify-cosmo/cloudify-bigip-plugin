plugins:
    bigip:
        executor: central_deployment_agent
        install: false

relationships:
    cloudify.bigip.connected_to_bigip:
        derived_from: cloudify.relationships.connected_to
        source_interfaces:
            cloudify.interfaces.relationship_lifecycle:
                establish:
                    implementation: bigip.bigip_plugin.tasks.add_member
                    inputs:
                        pool_id:
                            description: ID of pool to add to
                            type: string
                        address:
                            description: hostname / IP address to add
                            type: string
                        port:
                            description: port to add
                            type: integer
                unlink:
                    implementation: bigip.bigip_plugin.tasks.remove_member
                    inputs:
                        pool_id:
                            type: string
                        address:
                            type: string
                        port:
                            type: integer

node_types:
    bigip_server:
        derived_from: cloudify.nodes.LoadBalancer
        properties:
            host:
                description: Hostname / address of the BIG-IP component
                type: string
            username:
                description: Username to authenticate to BIG-IP with
                type: string
            password:
                description: Password to authenticate to BIG-IP with
                type: string
            pool_configs:
                description: List of tuples, each containing a pool ID and a load-balancing method
        interfaces:
            cloudify.interfaces.lifecycle:
                create:
                    implementation: bigip.bigip_plugin.tasks.create_pools
                delete:
                    implementation: bigip.bigip_plugin.tasks.delete_pools

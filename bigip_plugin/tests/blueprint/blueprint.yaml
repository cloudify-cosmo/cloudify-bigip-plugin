tosca_definitions_version: cloudify_dsl_1_0

imports:
    - http://www.getcloudify.org/spec/cloudify/3.1rc2/types.yaml
    - plugin.yaml

inputs:
    host:
        default: ''
    username:
        default: ''
    password:
        default: ''

node_templates:
    bigip:
        type: bigip_server
        properties:
            host: { get_input: host }
            username: { get_input: username }
            password: { get_input: password }
            pool_configs: [[test, LB_METHOD_ROUND_ROBIN]]

    node1:
        type: cloudify.nodes.Root
        relationships:
            - type: cloudify.bigip.connected_to_bigip
              target: bigip
              source_interfaces:
                cloudify.interfaces.relationship_lifecycle:
                    establish:
                        inputs:
                            pool_id: test
                            address: 10.0.0.25
                            port: 1000
                    unlink:
                        inputs:
                            pool_id: test
                            address: 10.0.0.25
                            port: 1000
